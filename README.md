# Puckpaste

Сервис для сохранения отрывков текста и дальнейшего их распространения посредством сгенерированных ссылок
(аналог [Pastebin](https://pastebin.com/)).

# Описание функциональности
Пользователь попадает на базовую страницу, где он может вставить текстовый фрагмент или загрузить текстовый файл.  
Также опционально могут быть заданы название, описание и время жизни, после которого текст будет автоматически удален.  
Совокупность вышеприведенных данных называется постом, который является основной сущностью в системе.  
После создания поста пользователь получает ссылку на него, которой он может делиться с другими пользователями.  
Любой пользователь, имеющий ссылку на пост может просматривать его.  
После публикации пост не может быть изменен или удален до истечения срока его жизни.  
Таким образом, если ссылка на пост будет утеряна всеми пользователями, то доступ к нему будет невозможен.  

Также сервис будет предоставлять публичную обезличенную статистику по текущему количеству постов в системе.

## Дополнительные фичи на будущее
- Продление времени жизни постов
- Сохранение ссылок на недавно загруженные посты в сессии (будет отображаться в отдельном блоке)
- Дополнительные опциональные поля
  - Имя автора
  - Теги
  - Тип файла (для соответствующей подсветки синтаксиса)
- Общедоступная история загрузки постов
- Поиск постов
  - По названию
  - По автору
  - По тегам
  - По времени загрузки
- Авторизация, дающая возможность удаления и редактирования постов
- Капча


# REST API

### GET /{id}
Получение поста по идентификатору `id`.

Пример ответа:

```
  {
    "id": "8743b52063cd84097a65d1633f5c74f5",
    "title": "Post title",
    "description": "Some description",
    "content": "Some meaningful (not sure) code",
    "expires": "15.09.2023 11:04:29"
  }
```  

HTTP коды ответов:
- 200 - ОК
- 400 - неверный формат `id`
- 404 - пост не был найден (либо несуществующий `id`, либо срок жизни поста истек)

### GET /new
Получение формы для создания поста.  
После заполнения данные отправляются на `POST /`.


### POST /
Создание нового поста. Данные передаются в теле запроса в виде полей формы (x-www-form-urlencoded).

Поля формы:
- **content** - текстовый фрагмент (не более 20000 символов, обязательное поле)
- **title** - название поста (не более 100 символов, по умолчанию - пусто, опциональное поле)
- **description** - описание поста (не более 1500 символов, по умолчанию - пусто, опциональное поле)
- **expirationTimeInDays** - время жизни поста в днях (от 1 до 30, по умолчанию - 7, опциональное поле)

Пример ответа:
```
  {
    "link": "https://puckpaste.com/8743b52063cd84097a65d1633f5c74f5",
    "post": {
        "id": "8743b52063cd84097a65d1633f5c74f5",
      "title": "Post title",
      "description": "Some description",
      "content": "Some meaningful (not sure) code",
      "expires": "15.09.2023 11:04:29"
    }
  }
```

HTTP коды ответов:
- 200 - ОК
- 400 - отсутствует хотя бы одно из обязательных полей
- 413 - количество символов в каком-либо из полей превышает допустимое ограничение


## Общие замечания
В случае возникновения ошибки тело ответа для всех видов запросов имеет следующий вид:
```
  {
    "message": "error message"
  }
```